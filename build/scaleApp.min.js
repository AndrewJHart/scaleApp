/* scaleApp.js */
var scaleApp=function(){var t=function(d,h){var g={debug:function(e){d.log.debug(e,h)},info:function(e){d.log.info(e,h)},warn:function(e){d.log.warn(e,h)},error:function(e){d.log.error(e,h)},fatal:function(e){d.log.fatal(e,h)}};return{subscribe:function(e,i){d.subscribe(h,e,i)},unsubscribe:function(e){d.unsubscribe(h,e)},publish:function(e,i){d.publish(e,i)},startSubModule:function(e,i,k){d.startSubModule(e,i,k,h)},stopSubModule:function(e){d.stop(e)},getModel:function(e){return d.getModel(h,e)},
getView:function(e){return d.getView(h,e)},debug:g.debug,info:g.info,warn:g.warn,error:g.error,fatal:g.fatal,_:function(e){return d.i18n._(h,e)}}};return function(){var d={},h={},g={},e={},i={},k={},u=function(a){if(typeof a!=="object"){d.log.error("could not register module - option has to be an object","core");return false}if(a.views){if(typeof a.views!=="object"){d.log.error("could not register module - 'views' property has to be an object","core");return false}for(var b in a.views)if(a.views[b]){if(typeof a.views[b]!==
"function"){d.log.error("could not register module - the view "+b+" is not a function","core");return false}if(typeof a.views[b]()!=="object"){d.log.error("could not register module - the view "+b+" does not return an object","core");return false}}}if(a.models){if(typeof a.models!=="object"){d.log.error("could not register module - the 'models' property has to be an object","core");return false}for(var c in a.models)if(a.models[c]){b=a.models[c];if(typeof b!=="function"){d.log.error("could not register module - the model "+
c+" is not a function","core");return false}if(typeof b()!=="object"){d.log.error("could not register module - the model "+c+" does not return an object","core");return false}}}return true},v=function(a,b,c){if(typeof a!=="string"){d.log.error("could not register module- mouduleId has to be a string","core");return false}if(typeof b!=="function"){d.log.error("could not register module - creator has to be a constructor function","core");return false}a=b();if(typeof a!=="object"||typeof a.init!=="function"||
typeof a.destroy!=="function"){d.log.error("could not register module - creator has to return an object with the functions 'init' and 'destroy'","core");return false}if(c)if(!u(c))return false;return true},q=function(a,b,c){if(typeof a==="string"&&(typeof b==="string"&&!c||typeof b==="object"&&!c||typeof b==="string"&&typeof c==="object"||!b&&!c)){if(typeof b==="object"&&!c){c=b;b=a}if(!b&&!c){b=a;c={}}return{moduleId:a,instanceId:b,opt:c}}d.log.error("could not start module '"+a+"' - illegal arguments.",
"core")},s=function(a,b,c){if(a=q(a,b,c)){d.log.debug("start '"+a.moduleId+"'","core");b=a.instanceId;var f;var j=a.moduleId;c=a.instanceId;var m=h[j];if(m){f={};$.extend(true,f,m.opt,a.opt);j=new t(d,c,f);m=m.creator(j);m.opt=f;if(f.models){for(var l in f.models)if(f.models[l]){var n=c,o=l,w=f.models[l](j);i[n]||(i[n]={});i[n][o]=w}delete f.models}if(f.views){for(var r in f.views)if(f.views){l=c;n=r;o=f.views[r](j);k[l]||(k[l]={});k[l][n]=o}delete f.views}f=m}else d.log.error("could not start module '"+
j+"' - module does not exist.","core");g[b]=f;g[a.instanceId].init();return true}return false},p=function(a){var b=g[a];if(b){b.destroy();delete g[a];for(var c in e[a])e[a][c]&&p(e[a][c])}else d.log.error("could not stop instance '"+a+"' - instance does not exist.","core")};return d={register:function(a,b,c){if(!v(a,b,c))return false;c||(c={});h[a]={creator:b,opt:c};return true},start:s,startSubModule:function(a,b,c,f){a=q(a,b,c);if(s(a.moduleId,a.instanceId,a.opt)&&typeof f==="string"){(f=e[f])||
(f=[]);f.push(a.instanceId)}},stop:p,stopAll:function(){for(var a in g)g.hasOwnProperty(a)&&p(a)},publish:function(a,b){for(var c in g)if(g[c].subscriptions){var f=g[c].subscriptions[a];if(f)for(var j in f)typeof f[j]==="function"&&f[j](b)}},subscribe:function(a,b,c){d.log.debug("subscribe to '"+b+"'",a);a=g[a];if(!a.subscriptions)a.subscriptions={};a=a.subscriptions;a[b]||(a[b]=[]);a[b].push(c)},getModel:function(a,b){if(i[a])return i[a][b]},getView:function(a,b){if(k[a])return k[a][b]},getInstance:function(a){return g[a]},
log:{debug:function(){},info:function(){},warn:function(){},error:function(){},fatal:function(){}}}}()}();
/* scaleApp.log.js */
scaleApp.log=function(){if(!console){console={};console.log=function(){};console.debug=function(){};console.info=function(){};console.warn=function(){};console.error=function(){};console.fatal=function(){}}var b={DEBUG:0,INFO:1,WARN:2,ERROR:3,FATAL:4},d=function(c,a,e){if(e)if(typeof a==="object"){d(c,e+":");d(c,a);return}else a=e+": "+a;switch(c){case b.DEBUG:0<=b.DEBUG&&console.debug(a);break;case b.INFO:0<=b.INFO&&console.info(a);break;case b.WARN:0<=b.WARN&&console.warn(a);break;case b.ERROR:0<=
b.ERROR&&console.error(a);break;case b.FATAL:0<=b.FATAL&&console.error(a);break;default:console.log(a)}};return{debug:function(c,a){d(b.DEBUG,c,a)},info:function(c,a){d(b.INFO,c,a)},warn:function(c,a){d(b.WARN,c,a)},error:function(c,a){d(b.ERROR,c,a)},fatal:function(c,a){d(b.FATAL,c,a)}}}();
/* scaleApp.i18n.js */
scaleApp.i18n=function(e){var d=function(){return navigator.language||navigator.browserLanguage},b=d();return{setLanguage:function(a){if(typeof a==="string"){b=a;this.publish("languageChanged",a);return true}return false},getBrowserLanguage:d,getLanguage:function(){return b},_:function(a,f){var c=e.getInstance(a);if(c.opt)if(c.opt.i18n)return c.opt.i18n[b][f];return""}}}(scaleApp);