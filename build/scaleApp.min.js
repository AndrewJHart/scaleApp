function k(){return function(){}}
window.scaleApp=function(){function h(j){var a=i[j];if(a)a.destroy(),delete i[j],$.each(m[j],function(j,a){a&&h(a)});else return g.log.error("could not stop instance '"+j+"' - instance does not exist.","core"),!1}function c(j,a,c,f){return typeof j==="string"&&(typeof a==="string"&&!c||typeof a==="object"&&!c||typeof a==="string"&&typeof c==="object"||!a&&!c)||$.isArray(j)&&!a&&!c?b(j,a,c,f):(g.log.error("could not start module '"+j+"' - illegal arguments.","core"),!1)}function b(j,c,f,d){var b=e(j,
c,f);if(b)return g.log.debug("start '"+b.moduleId+"'","core"),a(b.moduleId,b.instanceId,b.opt,function(j){i[b.instanceId]=j;j.init();typeof d==="function"&&d()}),!0;return!1}function e(j,a,c){typeof a==="object"&&!c&&(c=a,a=j);!a&&!c&&(a=j,c={});return{moduleId:j,instanceId:a,opt:c}}function f(a,c,f){if(typeof a!=="string")return g.log.error("could not register module- mouduleId has to be a string","core"),!1;if(typeof c!=="function")return g.log.error("could not register module - creator has to be a constructor function",
"core"),!1;a=c();if(typeof a!=="object"||typeof a.init!=="function"||typeof a.destroy!=="function")return g.log.error("could not register module - creator has to return an object with the functions 'init' and 'destroy'","core"),!1;if(f&&!d(f))return!1;return!0}function d(a){if(typeof a!=="object")return g.log.error("could not register module - option has to be an object","core"),!1;if(a.views&&typeof a.views!=="object")return!1;if(a.models&&typeof a.models!=="object")return!1;if(a.templates&&typeof a.templates!==
"object")return!1;return!0}function a(a,c,f,b){function d(){typeof b==="function"&&b(m)}var e=l[a],m;if(e){var i={};$.extend(!0,i,e.opt,f);var h=new g.sandbox(c,i);m=e.creator(h);m.opt=i;$.each(n,function(a,j){j(c,i,h)});i.templates&&g.template?g.template.loadMultiple(i.templates).done(function(a){g.template.set(c,a);d()}).fail(k()).then(function(){delete i.templates}):d()}else g.log.error("could not start module '"+a+"' - module does not exist.","core")}var g=this,l={},i={},m={},n=[];return g={register:function(a,
c,b){if(!f(a,c,b))return!1;b||(b={});l[a]={creator:c,opt:b};return!0},onInstantiate:function(a){typeof a==="function"?n.push(a):g.log.error("onInstantiate expect a function as parameter","core")},start:c,startSubModule:function(a,b,f,d,g){a=e(a,b,f);c(a.moduleId,a.instanceId,a.opt,g)&&typeof d==="string"&&((d=m[d])||(d=[]),d.push(a.instanceId))},stop:h,startAll:function(a,b){function d(){}if(typeof a==="function")var f=0,f=$.isArray(b)?b.length:g.util.countObjectKeys(l),d=function(){f--;f===0&&a()};
$.isArray(b)?$.each(b,function(a,b){typeof b==="string"?c(b,b,l[b].opt,d):typeof b==="object"?b.j&&b.k?c(b.j,b.m,b.k,d):g.log.error("could not start module from array - invalid parameters","core"):g.log.error("could not start module from array","core")}):$.each(l,function(a,b){b&&c(a,a,b.opt,d)})},stopAll:function(){$.each(i,function(a){h(a)})},publish:function(a,b,c){$.each(i,function(d,f){if(f.subscriptions){var e=f.subscriptions[a];e&&$.each(e,function(f,d){if(typeof d==="function")if(typeof b===
"object"&&c!==!0){var e={};$.extend(!0,e,b);d(e,a)}else d(b,a)})}})},subscribe:function(a,b,c){g.log.debug("subscribe to '"+b+"'",a);a=i[a];a.subscriptions||(a.subscriptions={});a=a.subscriptions;a[b]||(a[b]=[]);a[b].push(c)},getContainer:function(a){var b=i[a].opt;if(b&&typeof b.container==="string")return $("#"+b.container);return $("#"+a)},getInstance:function(a){return i[a]},log:{debug:k(),info:k(),warn:k(),error:k(),fatal:k()}}}(window);scaleApp.log=function(h){function c(f,d,a){if(a)if(typeof d==="object"){c(f,a+":");c(f,d);return}else d=a+": "+d;switch(f){case e.d:b<=e.d&&console.debug(d);break;case e.c:b<=e.c&&console.info(d);break;case e.g:b<=e.g&&console.warn(d);break;case e.f:b<=e.f&&console.error(d);break;case e.e:b<=e.e&&console.error(d);break;default:console.log(d)}}h.console||(h.console={log:k(),debug:k(),info:k(),warn:k(),error:k(),fatal:k()});var b=0,e={d:0,c:1,g:2,f:3,e:4};return{debug:function(b,d){c(e.d,b,d)},info:function(b,
d){c(e.c,b,d)},warn:function(b,d){c(e.g,b,d)},error:function(b,d){c(e.f,b,d)},fatal:function(b,d){c(e.e,b,d)},setLogLevel:function(c){if(typeof c==="string")switch(c.toLowerCase()){case "debug":b=e.d;break;case "info":b=e.c;break;case "warn":b=e.g;break;case "error":b=e.f;break;case "fatal":b=e.e;break;default:b=e.c}else typeof c==="number"&&(b=c>=e.d&&c<=e.e?c:e.c)},getLogLevel:function(){return b}}}(window);scaleApp.i18n=function(h,c){function b(){return(navigator.language||navigator.l||"en").split("-")[0]}var e=b();return{setLanguage:function(b){if(typeof b==="string")return e=b,c.publish("languageChanged",b),!0;return!1},getBrowserLanguage:b,getLanguage:function(){return e},_:function(b,d){var a=c.getInstance(b);if(a.opt&&a.opt.i18n)return a.opt.i18n[e][d]||d;return d}}}(window,window.scaleApp);scaleApp.util=scaleApp.util||{mixin:function(h,c){function b(b,c){var d={};$.extend(d,b,c);$.extend(c,d)}switch(typeof c+"-"+typeof h){case "function-function":b(c.prototype,h.prototype);break;case "function-object":b(c.prototype,h);break;case "object-object":b(c,h);break;case "object-function":b(c,h.prototype)}},countObjectKeys:function(h){var c=0;if(typeof h==="object")for(var b in h)c++;return c}};scaleApp.template=scaleApp.template||function(h,c){function b(b){var c=$.Deferred();typeof b==="string"?$.get(b).done(function(a){c.resolve($('<script type="text/x-jquery-tmpl">'+a+"<\/script>").template())}).fail(function(){c.reject("Could not load the template")}):c.reject("function argument has to be a string");return c.promise()}var e={};return{load:b,loadMultiple:function(c){function d(a){return function(b){h[a]=b}}var a=$.Deferred(),e=[],h={},i;for(i in c)e.push(b(c[i]).done(new d(i)));$.when.apply(null,
e).done(function(){a.resolve(h)});return a.promise()},get:function(b,c){var a=e[b];if(a){if(!c&&$(a).length==1){for(var g in a)break;return a[g]}return a[c]}},add:function(b,d,a){typeof b==="string"&&typeof d==="string"&&typeof a==="function"?(e[b]||(e[b]={}),e[b][d]=a):c.log.error("could not add template: invalid parameters","template")},set:function(b,d){typeof b==="string"&&typeof d==="object"?e[b]=d:c.log.error("could not set templates: invalid parameters","template")}}}(window,window.scaleApp);scaleApp.a=scaleApp.a||function(h,c){function b(a,b,d){if(a=a[b]){if(!d&&c.util.countObjectKeys(a)==1){for(var e in a)break;return a[e]}return a[d]}}function e(a,b,c,d){a[b]||(a[b]={});a[b][c]=d}function f(a,b,c){typeof c==="object"&&$.each(c,function(c,d){d&&e(a,b,c,d)})}function d(b){typeof b==="object"&&$.each(b,function(b,d){d&&c.util.mixin(d,a)})}function a(){}a.prototype={subscribe:function(a){if(!this.b)this.b=[];this.b.push(a)},unsubscribe:function(a){if(this.b)this.b=this.b.filter(function(b){if(b!==
a)return b})},notify:function(){this.b&&$.each(this.b,function(a,b){typeof b.update==="function"&&b.update()})}};var g={},l={},i={};c.onInstantiate(function(a,b){b.models&&(d(b.models),f(g,a,b.models));b.views&&f(l,a,b.views);b.controllers&&f(i,a,b.controllers)});return{addModel:function(a,b,c){e(g,a,b,c)},addView:function(a,b,c){e(l,a,b,c)},addController:function(a,b,c){e(i,a,b,c)},getModel:function(a,c){return b(g,a,c)},getView:function(a,c){return b(l,a,c)},getController:function(a,c){return b(i,
a,c)},observable:a}}(window,window.scaleApp);window.scaleApp.sandbox=window.scaleApp.sandbox||function(h,c){return function(b){function e(a){return c.template.get(b,a)}function f(a,b){c.publish(a,b)}var d={h:function(a){c.log.debug(a,b)},info:function(a){c.log.info(a,b)},warn:function(a){c.log.warn(a,b)},error:function(a){c.log.error(a,b)},i:function(a){c.log.fatal(a,b)}};return{subscribe:function(a,d){c.subscribe(b,a,d)},unsubscribe:function(a){c.unsubscribe(b,a)},publish:f,startSubModule:function(a,d,e,f){c.startSubModule(a,d,e,b,f)},stopSubModule:function(a){c.stop(a)},
getModel:function(a){return c.a.getModel(b,a)},getView:function(a){return c.a.getView(b,a)},getController:function(a){return c.a.getController(b,a)},addModel:function(a,d){return c.a.addModel(b,a,d)},addView:function(a,d){return c.a.addView(b,a,d)},addController:function(a,d){return c.a.addController(b,a,d)},observable:c.a.observable,getTemplate:e,tmpl:function(a,c){if(typeof a==="string")return $.tmpl(e(a),c);else if(typeof a==="function")return $.tmpl(a,c);else d.error("type of 'id' is not valid",
"sandbox of "+b)},getContainer:function(){return c.getContainer(b)},debug:d.h,info:d.info,warn:d.warn,error:d.error,fatal:d.i,mixin:c.util.mixin,count:c.util.countObjectKeys,_:function(a){return c.i18n._(b,a)},getLanguage:c.i18n.getLanguage,hotkeys:function(a,b,c,d){typeof b==="string"?(d||(d="keypress"),$(document).bind(d,a,function(){f(b,c)})):typeof b==="function"&&(c||(c="keypress"),$(document).bind(c,a,b))}}}}(window,window.scaleApp);
